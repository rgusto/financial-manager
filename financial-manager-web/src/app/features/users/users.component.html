<div class="card">
  @if (users$ | async; as users) {

  <div class="card-header">
    <div>
      <div class="card-title">Usuários</div>
      <div class="card-subtitle"></div>
    </div>
    <div class="card-toolbar">
      <button pButton class="card-toolbar-button" pTooltip="Atualizar" tooltipPosition="bottom" (click)="findAll()"><i
          class='bx bx-refresh'></i></button>
      <button pButton class="card-toolbar-button"><i class='bx bx-plus'></i></button>
      <span class="card-toolbar-separator">|</span>
      <button pButton class="card-toolbar-button" [disabled]="selectedUsers.length !== 1"><i
          class='bx bx-detail'></i></button>
      <button pButton class="card-toolbar-button" [disabled]="selectedUsers.length !== 1"><i
          class='bx bxs-edit'></i></button>
      <button pButton class="card-toolbar-button" [disabled]="selectedUsers.length === 0"><i
          class='bx bx-trash'></i></button>
      <span class="card-toolbar-separator">|</span>
      <button pButton class="card-toolbar-button"><i class='bx bx-printer'></i></button>
      <button pButton class="card-toolbar-button"><i class='bx bx-export'></i></button>
    </div>
  </div>

  <div class="card-content">
    <p-table [value]="users" [paginator]="true" [rows]="10" [showCurrentPageReport]="true"
      [tableStyle]="{ 'min-width': '50rem' }" responsiveLayout="stack" [breakpoint]="'680px'"
      currentPageReportTemplate="Mostrando {first} a {last} de {totalRecords} registro(s)"
      [rowsPerPageOptions]="[10, 20, 30, 50]" paginatorLocale="pt-BR" selectionMode="multiple"
      [(selection)]="selectedUsers" dataKey="id">
      <ng-template pTemplate="header">
        <tr>
          <th style="width: 4rem"><p-tableHeaderCheckbox /></th>
          <th pSortableColumn="name" style="width:20%">Nome<p-sortIcon field="firstName"></p-sortIcon></th>
          <th pSortableColumn="type" style="width:20%">Sobrenome<p-sortIcon field="lastName"></p-sortIcon></th>
          <th pSortableColumn="balance" style="width:20%">E-mail<p-sortIcon field="email"></p-sortIcon></th>
          <th style="width:20%">Ações</th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-user let-rowIndex="rowIndex">
        <tr>
          <td>
            <p-tableCheckbox [value]="user" />
          </td>
          <td><span class="p-column-title">Nome</span>{{ user.firstName }}</td>
          <td><span class="p-column-title">Tipo</span>{{ user.lastName }}</td>
          <td><span class="p-column-title">Saldo</span>{{ user.email }}</td>
          <td>
            <div class="table-action-toolbar">
              <button pButton class="table-action-button" pTooltip="Visualizar detalhes" tooltipPosition="bottom"><i
                  class='bx bx-detail'></i></button>
              <button pButton class="table-action-button"><i class='bx bxs-edit'></i></button>
              <button pButton class="table-action-button"><i class='bx bx-trash'></i></button>
            </div>
          </td>
        </tr>
      </ng-template>
    </p-table>

  </div>
  } @else {
  <div class="loading-spinner">
    <p-progressSpinner styleClass="w-4rem h-4rem" strokeWidth="4" animationDuration=".5s"></p-progressSpinner>
  </div>
  }
</div>
